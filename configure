#!/bin/bash
#
# Top-level configuration kick-off script for TAU
#
# John C. Linford <jlinford@paratools.com>
# June 2014
#

HERE="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
SRC="src"
BUILD="build"

# Defaults
prefix="$HERE"

# Start at the top
cd "$HERE"

# Update build directory
make build BUILD="$BUILD" SRC="$SRC"

# Set prefix if not already set
for arg in "$@"; do
  case $arg in
    -prefix=*)
      prefix="`echo $arg | sed -e 's/-prefix=//'`"
      shift
      ;;
  esac
done

# Configure in build directory
cd "$BUILD"
./configure -prefix="$prefix" $@
err=$?

#if [ $err -eq 0 ] ; then
#  ln -s 

